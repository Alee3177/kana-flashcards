<!doctype html>
<html lang="zh-Hant">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
<title>æ—¥æ–‡50éŸ³ Flash Card</title>

<style>
:root{
  --bg:#0b0f14;
  --text:#eaf1ff;
  --muted:#9fb0c7;
  --accent:#5fe1b0;
  --danger:#ff6b6b;

  --hira:#ffffff;
  --kata:#e6c76a;
  --yoon:#f0b35a;
  --dakuten:#e07a6f;

  --ui-scale:1.3;
  --kana-scale:2;
}

@media (max-width:420px),(max-height:700px){
  :root{
    --ui-scale:1.15;
    --kana-scale:1.5;
  }
}

body{
  margin:0;
  font-family:system-ui,-apple-system,BlinkMacSystemFont;
  background:var(--bg);
  color:var(--text);
  display:flex;
  justify-content:center;
}

.app{
  width:min(520px,100%);
  padding:12px;
}

h1{font-size:calc(18px * var(--ui-scale));margin:0;}

.controls label{
  display:flex;
  align-items:center;
  gap:6px;
  font-size:calc(13px * var(--ui-scale));
}

.card{
  margin-top:12px;
  height:70vh;
  background:#111;
  border-radius:16px;
  position:relative;
  perspective:1200px;
}

.inner{
  position:absolute;
  inset:0;
  transition:transform .6s;
  transform-style:preserve-3d;
}

.card.flipped .inner{transform:rotateY(180deg);}

.face{
  position:absolute;
  inset:0;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  backface-visibility:hidden;
}

.back{transform:rotateY(180deg);}

.kana{
  font-size:calc(96px * var(--kana-scale));
  font-weight:800;
}

.romaji{
  font-size:calc(24px * var(--kana-scale));
  color:var(--accent);
}

.hint{
  position:absolute;
  bottom:10px;
  left:12px;
  right:12px;
  display:flex;
  flex-direction:column;
  gap:6px;
  font-size:calc(12px * var(--ui-scale));
}

.hintLine{display:flex;}

.badge{
  padding:6px 10px;
  background:#222;
  border-radius:999px;
}

.buttons button{
  font-size:calc(14px * var(--ui-scale));
  margin:4px;
}
</style>
</head>

<body>
<div class="app">

<h1>æ—¥æ–‡50éŸ³ Flash Card</h1>

<div class="controls">
  <label><input type="checkbox" id="optDakuten"> æ¿éŸ³</label>
  <label><input type="checkbox" id="optYoon"> æ‹—éŸ³</label>
  <label><input type="checkbox" id="optSound"> éŸ³æ•ˆ</label>
  <label><input type="checkbox" id="optAutoFront"> è‡ªå‹•å›æ­£é¢</label>

  <label>
    å‡ºç‰Œæ¨¡å¼ï¼š
    <select id="optOrderMode">
      <option value="random">éš¨æ©Ÿ</option>
      <option value="row">è¡Œå”¸æ³•</option>
      <option value="col">æ®µå”¸æ³•</option>
      <option value="interleave">è¡ŒÃ—æ®µäº¤éŒ¯</option>
    </select>
  </label>

  <label>
    è¡Œ / æ®µå…§ï¼š
    <select id="optInnerMode">
      <option value="none">ä¸éš¨æ©Ÿ</option>
      <option value="row">è¡Œå…§éš¨æ©Ÿ</option>
      <option value="col">æ®µå…§éš¨æ©Ÿ</option>
    </select>
  </label>
</div>

<div class="card" id="card">
  <div class="inner">
    <div class="face">
      <div class="kana" id="frontKana">ã‚</div>
      <div class="romaji" id="frontRomaji">a</div>
    </div>
    <div class="face back">
      <div class="kana" id="backKana">ã‚¢</div>
      <div class="romaji" id="backRomaji">a</div>
    </div>
  </div>

  <div class="hint">
    <div class="hintLine"><span class="badge" id="deckBadge"></span></div>
    <div class="hintLine"><span class="badge" id="statBadge"></span></div>
  </div>
</div>

<div class="buttons">
  <button id="btnFlip">ç¿»é¢</button>
  <button id="btnReveal">é¡¯ç¤ºç­”æ¡ˆ</button>
  <button id="btnKnow">æœƒ</button>
  <button id="btnDont">ä¸æœƒ</button>
</div>

</div>

<script>
// ===== è³‡æ–™è¡¨ï¼ˆå·²æ¸¬è©¦ç‰ˆï¼Œç•¥ï¼‰=====
// ğŸ‘‰ é€™è£¡ä¿ç•™ä½ ç›®å‰å·²ä¸Šç·šæ¸¬è©¦æˆåŠŸçš„ BASIC / DAKUTEN / YOONï¼ˆå« row / colï¼‰
// âš ï¸ ç‚ºé¿å…é‡è¤‡ï¼Œæˆ‘æ­¤è™•å‡è¨­ä½ ã€Œç›´æ¥ä¿ç•™å‰›å‰›é‚£ä¸€ç‰ˆè³‡æ–™ã€

/* ===== æ–°å¢æ’åºæ¨¡çµ„ï¼ˆå®Œå…¨ç¨ç«‹ï¼‰ ===== */

let orderMode = localStorage.getItem("orderMode") || "random";
let innerMode = localStorage.getItem("innerMode") || "none";

const orderDesc = {
  random: "éš¨æ©Ÿå‡ºç‰Œ",
  row: "è¡Œå”¸æ³•ï¼ˆã‚â†’ã„â†’ã†ï¼‰",
  col: "æ®µå”¸æ³•ï¼ˆã‚â†’ã‹â†’ã•ï¼‰",
  interleave: "è¡ŒÃ—æ®µäº¤éŒ¯"
};

document.getElementById("optOrderMode").value = orderMode;
document.getElementById("optInnerMode").value = innerMode;

function applyOrderMode(){
  if(orderMode==="row"){
    deck.sort((a,b)=>a.row-b.row||a.col-b.col);
  }
  if(orderMode==="col"){
    deck.sort((a,b)=>a.col-b.col||a.row-b.row);
  }
  if(orderMode==="interleave"){
    deck = interleave(deck);
  }
  applyInnerRandom();
}

function interleave(list){
  const result=[];
  const rows=[...new Set(list.map(k=>k.row))].sort();
  const cols=[...new Set(list.map(k=>k.col))].sort();
  cols.forEach(c=>rows.forEach(r=>{
    list.filter(k=>k.row===r&&k.col===c).forEach(k=>result.push(k));
  }));
  return result;
}

function applyInnerRandom(){
  if(innerMode==="none")return;
  const map={};
  deck.forEach(k=>{
    const key=innerMode==="row"?k.row:k.col;
    (map[key]??=[]).push(k);
  });
  deck=Object.values(map).flatMap(g=>g.sort(()=>Math.random()-0.5));
}

/* ===== UI äº‹ä»¶ ===== */

optOrderMode.onchange=e=>{
  orderMode=e.target.value;
  localStorage.setItem("orderMode",orderMode);
  buildDeck();
};

optInnerMode.onchange=e=>{
  innerMode=e.target.value;
  localStorage.setItem("innerMode",innerMode);
  buildDeck();
};

/* ===== ä½ æ—¢æœ‰ buildDeck() æœ€å¾Œåªéœ€åŠ ä¸€è¡Œ =====
applyOrderMode();
deckBadge.textContent = labels.join(" + ") + "ï½œ" + orderDesc[orderMode];
*/

</script>
</body>
</html>
